workspace: true

stages:
  - build
  - test

jobs:
  build:
    stage: build
    image: node:12-alpine
    services:
      - redis:alpine
    before_script:
      - echo before_script
    script:
      - ls -la
      - echo "Build title should take only subject from commit message"
    after_script:
      - echo "Build title should take only subject from commit message"

  testt:
    stage: test
    image: sunci/capistrano:latest
    script:
      - echo "Build title should take only subject from commit message"
    except:
      branches:
        - develop
  testt1:
    stage: test
    image: sunci/capistrano:latest
    script:
      - echo "Build title should take only subject from commit message"
    except:
      branches:
        - develop
  testt2:
    stage: test
    image: sunci/capistrano:latest
    script:
      - echo "Build title should take only subject from commit message"
    except:
      branches:
        - develop
  testt3:
    stage: test
    image: sunci/capistrano:latest
    script:
      - echo "Build title should take only subject from commit message"
    except:
      branches:
        - develop
  test2:
    stage: test
    image: sunci/capistrano:latest
    script:
      - sleep 2
      - echo ha
    except:
      branches:
        - master
  test3:
    stage: test
    image: sunci/capistrano:latest
    script:
      - sleep 2
      - echo haâdáddđ
    except:
      branches:
        - develop
